# Логирование в приложении Recorder

## Введение

Мы добавили библиотеку [pino](https://getpino.io/) для продвинутого логирования в приложении. Pino - это быстрая, низконакладная библиотека логирования для Node.js и браузерных приложений.

## Зачем нам нужен pino?

1. **Производительность**: Pino - одна из самых быстрых библиотек логирования для JavaScript/TypeScript приложений
2. **Гибкая настройка**: Возможность настройки уровней логирования в зависимости от окружения (development, production, test)
3. **Структурированные логи**: Автоматическое форматирование логов в JSON-формате для легкой обработки
4. **Поддержка браузера**: Совместим с браузерными приложениями
5. **Модульность**: Легко интегрируется в архитектуру модулей нашего приложения

## Архитектура модуля логирования

Мы создали модуль `logging` со следующей структурой:

```
src/modules/logging/
├── index.ts      # Основной класс LoggingModule
├── logger.ts     # Базовый экземпляр pino
├── types.ts      # Типы для логирования
└── index.test.ts # Тесты
```

## Использование

### В компонентах Vue

```typescript
import { loggingModule } from '@/modules/logging';

// Пример использования
loggingModule.info('Пользователь начал запись');
loggingModule.warn('Низкий уровень заряда батареи');
loggingModule.error('Ошибка при сохранении записи', error);
```

### В модулях приложения

Все наши модули (например, `AudioModule`, `StorageModule`) теперь автоматически используют систему логирования:

```typescript
// В AudioModule.ts
loggingModule.debug('Инициализация аудио модуля');
loggingModule.info('Микрофон успешно подключен');
loggingModule.error('Ошибка при записи аудио', error);
```

## Уровни логирования

- `trace` - Подробная трассировка выполнения (наиболее подробный уровень)
- `debug` - Отладочная информация
- `info` - Информационные сообщения
- `warn` - Предупреждения
- `error` - Ошибки
- `fatal` - Критические ошибки

## Конфигурация

Модуль логирования может быть сконфигурирован следующим образом:

```typescript
loggingModule.updateConfig({
  level: 'debug',           // Уровень логирования
  enabled: true,            // Включить/выключить логирование
  writeToConsole: true,     // Записывать в консоль
  writeToStorage: true,     // Сохранять в localStorage
  maxLogSize: 1024 * 1024, // Максимальный размер логов (1MB)
  retentionDays: 7         // Хранить логи 7 дней
});
```

## Экспорт логов

Пользователи могут экспортировать логи через UI:

```typescript
await loggingModule.exportLogs('recorder_logs_2026-02-09.txt');
```

## Преимущества для разработки

1. **Отладка**: Более подробные логи помогают быстро находить проблемы
2. **Мониторинг**: Возможность отслеживания состояния приложения в продакшене
3. **Анализ**: Структурированные логи позволяют легко анализировать поведение приложения
4. **Совместимость**: Работает как в браузере, так и в средах тестирования