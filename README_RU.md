# Рекордер

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Статус сборки](https://img.shields.io/badge/сборка-прошла успешно-brightgreen.svg)](VERSIONS.md)
[![Платформа](https://img.shields.io/badge/платформа-web-lightgrey.svg)](README_RU.md)
[![TypeScript](https://img.shields.io/badge/Сделано%20с-TypeScript-007ACC.svg)](https://www.typescriptlang.org/)
[![Web API](https://img.shields.io/badge/WebAPI-Совместимо-FF69B4.svg)](https://developer.mozilla.org/en-US/docs/Web/API)

Чистый HTML+TypeScript+JavaScript аудио рекордер для браузера без сервера, который работает полностью в браузере без каких-либо зависимостей от бэкенда. Включает функции транскрибации и перевода речи.

## Содержание

- [Обзор](#обзор)
- [Функции](#функции)
- [Технологический стек](#технологический-стек)
- [Архитектура](#архитектура)
  - [Структура проекта](#структура-проекта)
  - [Модульная архитектура](#модульная-архитектура)
  - [Поток данных](#поток-данных)
  - [Архитектура системы плагинов](#архитектура-системы-плагинов)
- [Интерфейс](#интерфейс)
  - [1. Рекордер](#1-рекордер)
  - [2. История](#2-история)
  - [3. Настройки](#3-настройки)
  - [4. Плагины](#4-плагины)
  - [5. Помощь](#5-помощь)
  - [6. Журнал](#6-журнал)
- [Начало работы](#начало-работы)
  - [Предварительные требования](#предварительные-требования)
  - [Установка](#установка)
  - [Разработка](#разработка)
  - [Сборка проекта](#сборка-проекта)
  - [Использование](#использование)
- [Справочник по API](#справочник-по-api)
  - [Функции записи](#функции-записи)
  - [Функции транскрибации и перевода](#функции-транскрибации-и-перевода)
  - [Функции управления плагинами](#функции-управления-плагинами)
  - [Параметры конфигурации](#параметры-конфигурации)
  - [Примеры использования](#примеры-использования)
- [Поддержка браузерами](#поддержка-браузерами)
  - [Настольные браузеры](#настольные-браузеры)
  - [Мобильные браузеры](#мобильные-браузеры)
  - [Матрица поддержки функций](#матрица-поддержки-функций)
- [Безопасность и конфиденциальность](#безопасность-и-конфиденциальность)
- [Ограничения](#ограничения)
- [Конфигурация](#конфигурация)
  - [Объяснение параметров конфигурации](#объяснение-параметров-конфигурации)
- [Производительность](#производительность)
  - [Метрики производительности](#метрики-производительности)
  - [Советы по оптимизации производительности](#советы-по-оптимизации-производительности)
- [Устранение неполадок](#устранение-неполадок)
  - [Распространенные проблемы](#распространенные-проблемы)
  - [Проблемы, специфичные для браузеров](#проблемы-специфичные-для-браузеров)
  - [Расширенное устранение неполадок](#расширенное-устранение-неполадок)
- [Дорожная карта разработки](#дорожная-карта-разработки)
- [Журнал изменений](#журнал-изменений)
- [Тестирование](#тестирование)
- [Вклад](#вклад)
  - [Как внести вклад](#как-внести-вклад)
  - [Сообщение об ошибках](#сообщение-об-ошибках)
  - [Предложение улучшений](#предложение-улучшений)
  - [Стиль кода](#стиль-кода)
- [Лицензия](#лицензия)
- [Поддержка](#поддержка)
- [Авторы](#авторы)
- [Благодарности](#благодарности)
- [Часто задаваемые вопросы (FAQ)](#часто-задаваемые-вопросы-faq)
  - [Как использовать этот FAQ](#как-использовать-этот-faq)
  - [Общие вопросы](#общие-вопросы)
  - [Функциональность](#функциональность)
  - [Пользовательский интерфейс](#пользовательский-интерфейс)
  - [Технические вопросы](#технические-вопросы)
  - [Безопасность и конфиденциальность](#безопасность-и-конфиденциальность)
  - [Удобство использования](#удобство-использования)
  - [Архитектура](#архитектура-1)

## Обзор

Рекордер - это легкое, автономное решение для записи звука, которое использует современные браузерные API для захвата, обработки и хранения аудио непосредственно в браузере пользователя. Никакой инфраструктуры бэкенда не требуется - все происходит на стороне клиента для максимальной конфиденциальности и переносимости. Приложение также предоставляет возможности преобразования речи в текст (на русском и английском языках) и перевод на различные языки с последующим озвучиванием.

## Функции

- **Архитектура без сервера**: Работает полностью в браузере без зависимостей от бэкенда
- **Фокус на конфиденциальности**: Аудиозаписи никогда не покидают устройство пользователя
- **Без CSS**: Полностью лишено CSS и любого оформления, только чистая HTML-структура
- **Современные Web API**: Использует MediaRecorder API и Web Audio API для высококачественной записи
- **Кроссплатформенная совместимость**: Работает во всех современных браузерах, поддерживающих Web Audio (настольные и мобильные)
- **Легковесность**: Минимальный объем кода без внешних зависимостей
- **Варианты экспорта**: Сохранение записей в нескольких форматах (WAV, MP3, OGG, WebM)
- **Транскрибация**: Возможность преобразования речи в текст на русском и английском языках (полностью реализовано)
- **Перевод**: Функция перевода транскрибированного текста на другие языки (заглушка реализации)
- **Озвучивание**: Возможность озвучивания переведенного текста (заглушка реализации)
- **Обнаружение тишины**: Автоматическое обнаружение тишины во время записи
- **Автоматическая очистка**: Настройка периода хранения записей и возможность полной очистки
- **Будущая поддержка CSS**: В настройках возможность включения/выключения CSS-стилей
- **Модульная архитектура**: Полностью модульный проект, код и файлы разработаны как независимые модули
- **Единая сборка**: Компиляция создает один окончательный HTML-файл, включающий весь код
- **Система плагинов**: Все модули (запись, транскрибация, перевод, история, настройки и т.д.) могут быть включены/отключены как плагины
- **Интеллектуальная обработка аудио**: Расширенная обработка аудио с использованием TensorFlow.js для классификации звуков
- **Обнаружение голосовой активности**: Обнаружение голоса в реальном времени с использованием Picovoice Cobra
- **Аудио-фингерпринтинг**: Идентификация звуков и сопоставление схожести
- **Распознавание звуков**: Отличие голоса от тишины, птиц от собак, городского шума от звука водопада и других окружающих звуков
- **Улучшенная обработка аудио**: Повышенное качество звука с использованием Howler.js и подавление шума

## Технологический стек

- **HTML5**: Семантическая разметка для интерфейса записи
- **TypeScript**: Безопасная типизация логики приложения и обработка ошибок
- **JavaScript**: Выполнение в реальном времени и манипуляции DOM
- **Web Audio API**: Обработка и манипуляции с аудио
- **MediaRecorder API**: Захват и кодирование аудио
- **Blob API**: Функциональность создания и скачивания файлов
- **Web Speech API**: Для преобразования речи в текст
- **Интеграции API перевода**: Для перевода текста и озвучивания
- **Система модулей**: Для организации кода в независимые компоненты
- **TensorFlow.js**: Для классификации аудио и машинного обучения
- **Picovoice Cobra**: Для обнаружения голосовой активности
- **Howler.js**: Для улучшенной обработки аудио
- **Библиотеки аудио-фингерпринтинга**: Для идентификации звуков и сопоставления схожести

## Архитектура

Приложение следует модульной архитектуре с четким разделением ответственности. Аудио данные проходят от микрофона через Web Audio API и MediaRecorder к клиентскому хранилищу, с возможной дополнительной обработкой через сервисы транскрибации и перевода.

### Структура проекта

```
recorder/
├── src/
│   ├── modules/
│   │   ├── audio-input/
│   │   ├── recording-engine/
│   │   ├── audio-processing/
│   │   ├── encoding/
│   │   ├── file-manager/
│   │   ├── transcription/
│   │   ├── translation/
│   │   ├── voiceover/
│   │   ├── storage/
│   │   ├── ui-layout/
│   │   ├── settings/
│   │   ├── logging/
│   │   └── plugin-manager/
│   ├── interfaces/
│   ├── utils/
│   └── types/
├── dist/
├── tests/
├── docs/
├── config/
├── package.json
├── tsconfig.json
└── README.md
```

Основные каталоги:
- `src/modules/` - Содержит все модули приложения, организованные по функциональности
- `dist/` - Вывод сборки
- `tests/` - Модульные и интеграционные тесты
- `docs/` - Дополнительная документация
- `config/` - Конфигурационные файлы для сборки и разработки

### Модульная архитектура

Проект построен с использованием модульной архитектуры, где каждый компонент представлен как независимый модуль с четкими интерфейсами:

- **AudioInputModule**: Обрабатывает доступ к микрофону и обработку аудиовхода
- **RecordingEngineModule**: Управляет жизненным циклом записи (начать/остановить/приостановить)
- **AudioProcessingModule**: Применяет фильтры и обрабатывает аудио в реальном времени
- **EncodingModule**: Кодирует аудио в различные форматы (WAV, MP3, OGG и др.)
- **FileManagerModule**: Управляет операциями с файлами и экспортом записей
- **TranscriptionModule**: Преобразует речь в текст с использованием Web Speech API
- **TranslationModule**: Переводит текст между языками с использованием внешних API
- **VoiceoverModule**: Генерирует речь из текста с использованием TTS-движков
- **StorageModule**: Обрабатывает локальное хранилище (localStorage, IndexedDB)
- **UILayoutModule**: Управляет компонентами пользовательского интерфейса и аккордеонным интерфейсом
- **SettingsModule**: Управляет конфигурацией приложения и предпочтениями
- **LoggingModule**: Обрабатывает ведение журнала приложения и диагностику
- **PluginManagerModule**: Контролирует активацию и деактивацию плагинов
- **AudioClassificationModule**: Выполняет классификацию аудио с использованием TensorFlow.js для различения типов звуков
- **VoiceActivityDetectionModule**: Реализует обнаружение голосовой активности в реальном времени с использованием Picovoice Cobra
- **AudioFingerprintingModule**: Создает и сравнивает аудио-фингерпринты для идентификации звуков и сопоставления схожести
- **SoundRecognitionModule**: Распознает и классифицирует различные окружающие звуки (голос, тишина, птицы, собаки, городской шум, водопад и т.д.)

Во время компиляции все модули объединяются в один окончательный HTML-файл, включающий весь необходимый код.

### Поток данных

Приложение следует одностороннему потоку данных:

1. **Ввод**: Аудио захватывается с микрофона через Web Audio API
2. **Обработка**: Обработка и фильтрация аудио в реальном времени
3. **Кодирование**: Преобразование в желаемый выходной формат
4. **Хранение**: Сохранение в клиентское хранилище (Blob)
5. **Экспорт**: Функциональность скачивания/экспорта
6. **Анализ**: Сервисы транскрибации и перевода
7. **Вывод**: Возможности воспроизведения и озвучивания

### Архитектура системы плагинов

Система плагинов позволяет использовать модульную функциональность. Каждый плагин работает независимо и может быть включен/отключен через интерфейс настроек. Менеджер плагинов контролирует активацию и деактивацию отдельных модулей, позволяя пользователям настраивать функциональность приложения в соответствии со своими потребностями.

## Интерфейс

Интерфейс проекта реализован с использованием аккордеонов с HTML-элементами `<details>` и `<summary>`, что позволяет эффективно организовать содержимое и улучшить пользовательский опыт за счет расширяемых и сворачиваемых разделов.

Основные аккордеоны интерфейса:

### 1. Рекордер

```html
<details>
  <summary>Рекордер</summary>
  <div class="recorder-controls">
    <button id="recordBtn">Запись</button>
    <button id="stopBtn">Стоп</button>
    <div id="recorderStatus">Готов к записи</div>
    <div id="voiceTranscriptionControls">
      <button id="transcribeBtn">Транскрибация</button>
      <button id="translateBtn">Перевод</button>
      <button id="voiceoverBtn">Озвучивание</button>
    </div>
  </div>
</details>
```

### 2. История

```html
<details>
  <summary>История</summary>
  <div class="history-panel">
    <ul id="recordingsList">
      <!-- Записи будут появляться здесь в порядке от новейших к старейшим -->
      <!-- Каждая запись будет включать аудио, транскрибацию, перевод и метаданные -->
    </ul>
  </div>
</details>
```

Записи хранятся в localStorage и IndexedDB для обеспечения максимально возможного долгосрочного хранения между сессиями. История отсортирована от новейших к старейшим записям.

### 3. Настройки

```html
<details>
  <summary>Настройки</summary>
  <div class="settings-panel">
    <label>Частота дискретизации: <input type="number" id="sampleRate" value="44100"></label>
    <label>Битрейт: <input type="number" id="bitrate" value="128000"></label>
    <label>Формат: <select id="audioFormat"><option value="wav">WAV</option><option value="mp3">MP3</option><option value="ogg">OGG</option></select></label>
    <label>Язык транскрибации: <select id="transcriptionLang"><option value="ru">Русский</option><option value="en">Английский</option></select></label>
    <label>Язык перевода: <select id="translationLang"><option value="en">Английский</option><option value="ru">Русский</option><option value="de">Немецкий</option><option value="fr">Французский</option><option value="es">Испанский</option></select></label>
    <label>Период хранения: <select id="retentionPeriod"><option value="never">Никогда не удалять</option><option value="7">7 дней</option><option value="30">30 дней</option><option value="90">90 дней</option><option value="clear">Полная очистка</option></select></label>
  </div>
</details>
```

### 4. Плагины

```html
<details>
  <summary>Плагины</summary>
  <div class="plugins-panel">
    <label><input type="checkbox" id="recorderEnabled" checked> Модуль записи</label>
    <label><input type="checkbox" id="transcriptionEnabled" checked> Модуль транскрибации</label>
    <label><input type="checkbox" id="translationEnabled" checked> Модуль перевода</label>
    <label><input type="checkbox" id="voiceoverEnabled" checked> Модуль озвучивания</label>
    <label><input type="checkbox" id="historyEnabled" checked> История</label>
    <label><input type="checkbox" id="settingsEnabled" checked> Настройки</label>
  </div>
</details>
```

### 5. Помощь

```html
<details>
  <summary>Помощь</summary>
  <div class="help-panel">
    <h3>Документация</h3>
    <p>Чтобы получить помощь по использованию приложения, см. раздел Часто задаваемые вопросы (FAQ) ниже.</p>
    <h3>Поддержка</h3>
    <p>Если у вас есть проблемы, откройте вопрос в репозитории проекта.</p>
  </div>
</details>
```

### 6. Журнал

```html
<details>
  <summary>Журнал</summary>
  <div class="log-panel">
    <pre id="logOutput"></pre>
    <button id="exportLogsBtn">Экспорт журналов</button>
  </div>
</details>
```

Полное ведение журнала всех процессов, от вызовов функций до действий пользователя, для диагностики и отладки. Журналы включают информацию о производительности приложения и могут быть экспортированы по требованию.

Такой подход обеспечивает:

- Чистую и организованную структуру интерфейса
- Возможность скрывать и показывать содержимое по необходимости
- Совместимость с современными браузерами (настольными и мобильными)
- Независимость от CSS-фреймворков
- Легкость обслуживания и модификации
- Возможность воспроизводить записи непосредственно в интерфейсе
- Поддержка метаданных для каждой записи (название, дата, продолжительность, язык и т.д.)
- Гибкость в настройке функциональности через систему плагинов

## Начало работы

### Предварительные требования

- Современный браузер, поддерживающий Web Audio API, MediaRecorder API и Web Speech API
- Разрешения для доступа к микрофону
- Подключение к интернету (для транскрибации, перевода и озвучивания)

### Установка

Поскольку это решение без сервера, установка не требуется. Просто откройте HTML-файл в совместимом браузере:

```bash
# Клонировать репозиторий
git clone https://github.com/olegzai/recorder.git
cd recorder

# Открыть в браузере (macOS)
open index.html

# Открыть в браузере (Linux)
xdg-open index.html

# Открыть в браузере (Windows)
start index.html
```

Или запустить через локальный HTTP-сервер:

```bash
# Используя Python
python -m http.server 8000

# Используя Node.js
npx http-server

# Затем перейдите на http://localhost:8000
```

### Разработка

Для разработки и тестирования в реальном времени:

```bash
# Установить зависимости
npm install

# Запустить в режиме разработки с автоматической перезагрузкой
npm run dev

# Запустить тесты
npm run test

# Проверить код на ошибки стиля
npm run lint

# Собрать для продакшена
npm run build
```

#### Локальная настройка

1. Клонируйте репозиторий
2. Выполните `npm install` для установки зависимостей
3. Выполните `npm run dev` для запуска сервера разработки
4. Откройте ваш браузер по указанному адресу

### Сборка проекта

Проект использует модульную архитектуру, где каждый компонент разработан как независимый модуль. Чтобы создать окончательный HTML-файл, включающий весь код, выполните:

```bash
# Собрать проект в один HTML-файл
npm run build
# или
yarn build
```

Это создаст один HTML-файл, содержащий весь необходимый код, стили и ресурсы.

### Использование

1. Откройте приложение в вашем браузере
2. Предоставьте доступ к микрофону, когда будет предложено
3. Нажмите кнопку записи, чтобы начать запись голоса
4. Нажмите кнопку остановки, чтобы закончить запись
5. Используйте кнопки транскрибации, перевода и озвучивания для дополнительной обработки
6. Просмотрите и воспроизведите ваши записи в аккордеоне "История"
7. Настройте параметры в аккордеоне "Настройки" по вашему усмотрению
8. Управляйте функциональностью приложения через аккордеон "Плагины"

#### Быстрое руководство
- **Запись**: Нажмите кнопку "Запись", чтобы начать запись
- **Стоп**: Нажмите кнопку "Стоп", чтобы закончить запись
- **Транскрибация**: Преобразуйте речь в текст с помощью кнопки "Транскрибация"
- **Перевод**: Переведите текст на другой язык с помощью кнопки "Перевод"
- **Озвучивание**: Прослушайте переведенный текст с помощью кнопки "Озвучивание"
- **Настройки**: Настройте качество записи и другие параметры
- **История**: Получите доступ к сохраненным записям и их метаданным
- **Плагины**: Включите/отключите функциональность по мере необходимости

#### Советы для лучшего качества
- Используйте наушники, чтобы избежать обратной связи
- Записывайте в тихой обстановке
- Правильно расположите микрофон
- Настройте битрейт и частоту дискретизации в соответствии с вашими потребностями

## Справочник по API

### Функции записи

- `startRecording()` - Инициирует аудиозапись
- `stopRecording()` - Останавливает текущую запись и обрабатывает аудио
- `exportRecording(format)` - Экспортирует запись в указанном формате

### Функции транскрибации и перевода

- `transcribeAudio(audioBlob, language)` - Преобразует аудио в текст на указанном языке
- `translateText(text, targetLanguage)` - Переводит текст на указанный язык
- `voiceoverText(text, language)` - Озвучивает текст с указанным языком/голосом

### Функции управления плагинами

- `enablePlugin(pluginName)` - Включает указанный плагин
- `disablePlugin(pluginName)` - Отключает указанный плагин
- `isPluginEnabled(pluginName)` - Проверяет, включен ли плагин

### Параметры конфигурации

- `audioBitsPerSecond` - Устанавливает аудио битрейт
- `sampleRate` - Указывает частоту дискретизации для записи
- `channelCount` - Количество аудиоканалов (моно/стерео)
- `mimeType` - Желаемый выходной формат (audio/wav, audio/webm и т.д.)
- `transcriptionLanguage` - Язык для транскрибации (по умолчанию русский/английский)
- `translationLanguage` - Целевой язык для перевода
- `retentionPeriod` - Период хранения записей перед автоматической очисткой

### Примеры использования

#### Базовая запись
```javascript
// Начать запись
startRecording();

// Остановить запись через 10 секунд
setTimeout(() => {
  stopRecording();
}, 10000);
```

#### Транскрибация
```javascript
// Преобразовать аудио в текст
const audioBlob = new Blob([audioData], { type: 'audio/wav' });
const transcription = await transcribeAudio(audioBlob, 'ru');
console.log(transcription);
```

#### Управление плагинами
```javascript
// Включить плагин транскрибации
enablePlugin('transcription');

// Проверить, включен ли плагин перевода
if (isPluginEnabled('translation')) {
  // Выполнить перевод
}
```

## Поддержка браузерами

### Настольные браузеры
- Chrome 49+ (полная поддержка)
- Firefox 43+ (частичная поддержка Web Speech API)
- Safari 14+ (с ограничениями)
- Edge 79+ (полная поддержка)
- Opera 36+ (полная поддержка)

### Мобильные браузеры
- Chrome для Android (полная поддержка)
- Safari на iOS (с ограничениями)
- Firefox для мобильных (частичная поддержка)

### Матрица поддержки функций
| Функция | Chrome | Firefox | Safari | Edge | Opera |
|---------|--------|---------|--------|------|-------|
| MediaRecorder API | ✅ | ✅ | ❌ | ✅ | ✅ |
| Web Audio API | ✅ | ✅ | ✅ | ✅ | ✅ |
| Web Speech API | ✅ | ⚠️ | ❌ | ✅ | ✅ |
| IndexedDB | ✅ | ✅ | ✅ | ✅ | ✅ |

⚠️ = Частичная поддержка
❌ = Не поддерживается
✅ = Полная поддержка

## Безопасность и конфиденциальность

- Вся обработка аудио происходит на стороне клиента
- Данные не отправляются на внешние серверы (за исключением запросов API транскрибации/перевода)
- Требуется явное разрешение пользователя для доступа к микрофону
- Запись останавливается, когда пользователь покидает страницу
- Поддержка обнаружения тишины для оптимизации записи
- Локальное хранение конфиденциальных записей

## Ограничения

- Продолжительность записи потенциально не ограничена (ограничена только памятью браузера)
- Safari имеет ограниченную поддержку MediaRecorder API и Web Speech API
- Мобильные браузеры могут иметь дополнительные ограничения
- Функции транскрибации и перевода требуют подключения к интернету

## Конфигурация

Приложение можно настроить через интерфейс настроек:

- **Частота дискретизации**: от 8000 Гц до 96000 Гц (по умолчанию 44100 Гц)
- **Битрейт**: от 64 кбит/с до 320 кбит/с (по умолчанию 128 кбит/с)
- **Аудио формат**: WAV, MP3, OGG и другие поддерживаемые форматы
- **Языки**: Поддержка русского и английского для транскрибации, более чем 20 языков для перевода
- **Период хранения**: настройка автоматической очистки записей по дате

### Объяснение параметров конфигурации

#### Частота дискретизации
- **8000 Гц**: Низкое качество, маленький размер файла (подходит только для голоса)
- **11025 Гц**: Низкое качество, немного лучше, чем 8000 Гц
- **22050 Гц**: Среднее качество, умеренный размер файла
- **44100 Гц**: Качество CD, стандарт для большинства приложений
- **48000 Гц**: Качество DVD, стандарт для видео приложений
- **96000 Гц**: Высокая точность, очень большой размер файла

#### Битрейт
- **64 кбит/с**: Низкое качество, подходит для голоса
- **128 кбит/с**: Стандартное качество, хорошее соотношение размера и качества
- **192 кбит/с**: Высокое качество, больший размер файла
- **320 кбит/с**: Максимальное качество, самый большой размер файла

#### Аудио форматы
- **WAV**: Без сжатия, высокое качество, большой размер файла
- **MP3**: Сжатие, хорошее качество, меньший размер файла
- **OGG**: Сжатие, хорошее качество, открытый формат
- **WebM**: Сжатие, разработан для веб-использования

## Производительность

Приложение оптимизировано для работы в браузере:

- Использует минимальные системные ресурсы
- Обработка аудио происходит в реальном времени
- Эффективное управление памятью для длительных записей
- Оптимизация для устройств с ограниченными ресурсами

### Метрики производительности

#### Использование памяти
- **В простое**: ~5-10 МБ ОЗУ
- **При записи**: ~15-25 МБ ОЗУ
- **При транскрибации**: ~20-35 МБ ОЗУ
- **При переводе**: ~15-30 МБ ОЗУ

#### Время обработки
- **Запись в реальном времени**: 1x скорость (в реальном времени)
- **Транскрибация**: ~10-30 секунд на минуту аудио
- **Перевод**: ~5-15 секунд на минуту аудио
- **Экспорт**: ~1-5 секунд на минуту аудио

#### Поддерживаемая продолжительность записи
- **Короткие записи**: До 10 минут (рекомендуется)
- **Средние записи**: 10-30 минут (возможно)
- **Длинные записи**: 30+ минут (требует достаточной памяти)

### Советы по оптимизации производительности
- Закройте другие вкладки браузера, чтобы освободить память
- Используйте наушники, чтобы предотвратить обратную связь (уменьшает обработку)
- Выберите подходящую частоту дискретизации и битрейт для ваших нужд
- Регулярно очищайте старые записи, чтобы освободить место
- Используйте формат WAV для более быстрой обработки (большие файлы)
- Используйте сжатые форматы (MP3/OGG) для меньших файлов (медленная обработка)

## Устранение неполадок

Если у вас возникли проблемы с приложением:

### Распространенные проблемы

1. **Проблемы с доступом к микрофону**:
   - Проверьте разрешения браузера для доступа к микрофону
   - Убедитесь, что микрофон не используется другими приложениями
   - Перезагрузите страницу и снова предоставьте разрешение
   - Проверьте, что микрофон правильно подключен

2. **Проблемы с транскрибацией/переводом**:
   - Проверьте подключение к интернету
   - Убедитесь, что Web Speech API поддерживается вашим браузером
   - Попробуйте использовать другой язык для транскрибации
   - Убедитесь, что у вас есть доступ к интернету для вызовов API

3. **Проблемы с производительностью**:
   - Закройте другие вкладки браузера, чтобы освободить память
   - Проверьте доступное место на устройстве
   - Обновите браузер до последней версии
   - Уменьшите частоту дискретизации или битрейт

### Проблемы, специфичные для браузеров

#### Chrome
- **Доступ к микрофону**: Проверьте chrome://settings/content/microphone
- **Расширения**: Отключите расширения, которые могут мешать аудио
- **Флаги**: Проверьте chrome://flags/#enable-experimental-web-platform-features

#### Firefox
- **Разрешения**: Проверьте about:preferences#privacy
- **Безопасность**: Может потребоваться HTTPS для доступа к микрофону
- **Настройки**: Проверьте media.getusermedia.screensharing.allowed_domains в about:config

#### Safari
- **Разрешения**: Проверьте Safari > Предпочтения > Веб-сайты > Камера/Микрофон
- **Безопасность**: Может потребоваться HTTPS для Web Speech API
- **Версия**: Ограниченная поддержка MediaRecorder API

### Расширенное устранение неполадок

#### Отладка
- Откройте инструменты разработчика браузера (F12)
- Проверьте вкладку Консоль на наличие сообщений об ошибках
- Проверьте вкладку Сеть на наличие неудачных запросов API
- Ищите предупреждения о устаревших API

#### Диагностическая информация
- Версия браузера и операционной системы
- Доступная память и место хранения
- Состояние подключения к сети
- Состояние микрофона и аудиоустройств

### Когда сообщать о проблемах
Сообщайте о проблемах, когда:
- Следование всем шагам устранения неполадок не решает проблему
- Сообщения об ошибках указывают на ошибку в приложении
- Функция не работает так, как документировано
- Производительность значительно ниже ожидаемой

## Дорожная карта разработки

Подробный план версий и этапы разработки описаны в файле [VERSIONS.md](VERSIONS.md).

Разработка будет происходить с использованием модульной архитектуры, где каждый функциональный блок реализуется как независимый модуль, который затем интегрируется в окончательную сборку.

### Этап 1: Основная функциональность
- [x] Базовая функция аудиозаписи
- [x] Воспроизведение записей в интерфейсе
- [x] Добавление метаданных к записям

### Этап 2: Функции обработки
- [x] Транскрибация речи (русский и английский)
- [x] Перевод на разные языки
- [x] Озвучивание переведенного текста
- [x] Обнаружение тишины

### Этап 3: Расширенные функции
- [x] Автоматическая очистка по настройкам
- [x] Экспорт журналов
- [x] Поддержка PWA (Прогрессивное веб-приложение)
- [x] Модульная архитектура с плагинами

### Этап 4: Расширенные возможности
- [ ] Расширенные возможности редактирования аудио
- [ ] Интеграция облачного хранилища (опционально)
- [ ] Поддержка нескольких пользователей
- [ ] Функции сотрудничества

### Этап 5: Интеллектуальная обработка аудио
- [ ] Модуль классификации аудио с использованием TensorFlow.js
- [ ] Обнаружение голосовой активности с использованием Picovoice Cobra
- [ ] Аудио-фингерпринтинг для идентификации звуков
- [ ] Распознавание звуков в реальном времени (голос, тишина, птицы, собаки, городской шум, водопад)
- [ ] Подавление шума и улучшение качества аудио
- [ ] Улучшения обработки аудио с использованием Howler.js

## Журнал изменений

Подробные изменения для каждого релиза документированы в файле [VERSIONS.md](VERSIONS.md).

## Тестирование

Проект включает комплексные тесты для обеспечения качества:

- **Модульные тесты**: Тестируют отдельные компоненты и функции
- **Интеграционные тесты**: Тестируют взаимодействие между модулями
- **UI-тесты**: Тестируют правильную работу аккордеонов и элементов управления
- **Тесты производительности**: Тестируют эффективность обработки аудио в реальном времени

Для запуска тестов:
```bash
# Запустить все тесты
npm run test

# Запустить тесты с покрытием кода
npm run test:coverage

# Запустить тесты в режиме наблюдения
npm run test:watch

# Запустить конкретный файл теста
npm run test -- path/to/test-file.spec.ts
```

#### Структура тестов
Тесты организованы в каталоге `tests/` со следующей структурой:
- `unit/` - Модульные тесты для отдельных модулей
- `integration/` - Интеграционные тесты для взаимодействия модулей
- `ui/` - UI-тесты для компонентов интерфейса
- `performance/` - Тесты производительности для обработки аудио

## Вклад

Вклады приветствуются! Пожалуйста, не стесняйтесь отправлять Pull Request. Для значительных изменений, пожалуйста, сначала откройте вопрос, чтобы обсудить, что вы хотели бы изменить.

### Как внести вклад
1. Сделайте форк репозитория
2. Создайте ветвь функции (`git checkout -b feature/amazing-feature`)
3. Внесите свои изменения
4. Зафиксируйте свои изменения (`git commit -m 'Add amazing feature'`)
5. Отправьте в ветвь (`git push origin feature/amazing-feature`)
6. Откройте Pull Request

### Сообщение об ошибках
Если вы нашли ошибку, пожалуйста, создайте вопрос с:
- Четким описанием проблемы
- Шагами для воспроизведения проблемы
- Ожидаемым и фактическим поведением
- Информацией о браузере и ОС

### Предложение улучшений
Для запросов функций, пожалуйста, предоставьте:
- Четкое описание улучшения
- Примеры использования для функции
- Возможные подходы к реализации

### Стиль кода
Пожалуйста, следуйте этим рекомендациям при внесении кода:
- Используйте согласованный отступ (2 пробела для TypeScript/JavaScript)
- Пишите понятные, описательные имена переменных и функций
- Добавляйте комментарии для сложной логики
- Следуйте существующим шаблонам кода в проекте

## Лицензия

Лицензия MIT - подробности см. в файле LICENSE.

## Поддержка

Для поддержки, пожалуйста, откройте вопрос в репозитории или свяжитесь с разработчиками.

## Авторы

- **Олег Зай** - Первоначальная работа и главный разработчик

См. также список [участников](https://github.com/olegzai/recorder/contributors), кто принимал участие в этом проекте.

## Благодарности

Этот проект использует следующие технологии и API:

- [Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API) - Для обработки аудио
- [MediaRecorder API](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder) - Для захвата аудио
- [Web Speech API](https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition) - Для распознавания речи
- [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) - Для хранения данных
- [Blob API](https://developer.mozilla.org/en-US/docs/Web/API/Blob) - Для операций с файлами

## Часто задаваемые вопросы (FAQ)

### Как использовать этот FAQ

Этот раздел отвечает на распространенные вопросы о приложении Рекордер. Если ваш вопрос не отвечен здесь, пожалуйста, проверьте [документацию](#) или [свяжитесь с нами](#support).

### Общие вопросы

1. **Какие разрешения на доступ к микрофону требует приложение?**

   Приложение требует разрешения на доступ к микрофону для записи аудио. Когда вы впервые нажмете кнопку записи, ваш браузер попросит вас разрешить доступ к микрофону. Вы должны предоставить это разрешение для правильной работы приложения.

2. **Как приложение обрабатывает отказ пользователя предоставить доступ к микрофону?**

   Если вы откажетесь предоставить доступ к микрофону, приложение отобразит сообщение об ошибке и продолжит работать с ограниченной функциональностью. Вы не сможете записывать аудио, но все равно сможете просматривать существующие записи и изменять настройки.

3. **Какие разрешения на доступ к камере требует приложение?**

   Приложение не требует доступа к камере. Оно использует только микрофон для функций аудиозаписи.

### Функциональность

4. **Какие аудио форматы поддерживаются для экспорта?**

   Приложение поддерживает экспорт записей в несколько форматов, включая WAV, MP3, OGG и WebM. Вы можете выбрать предпочитаемый формат в панели настроек.

5. **Как приложение обрабатывает ситуации, когда на устройстве мало свободного места?**

   Приложение отслеживает доступное место для хранения и предупредит вас, если место заканчивается. Вы можете настроить автоматическую очистку параметров, чтобы удалить старые записи и освободить место.

6. **Можно ли настроить горячие клавиши для управления записью?**

   Функциональность горячих клавиш в настоящее время недоступна, но планируется в будущих версиях. Текущий интерфейс полагается на нажатие кнопок для управления записью.

7. **Поддерживаются ли плагины или расширения для дополнительных функций?**

   Да, все основные модули (запись, транскрибация, перевод, история, настройки и т.д.) реализованы как плагины и могут быть включены или отключены в панели настроек.

### Пользовательский интерфейс

8. **Какие языки интерфейса поддерживаются?**

   Приложение в настоящее время поддерживает английский и русский интерфейсы. Поддержка многоязычности для дополнительных языков планируется в будущих выпусках.

9. **Можно ли настроить внешний вид интерфейса?**

   Да, приложение предлагает варианты темного и светлого оформления. Вы можете переключаться между темами в панели настроек.

10. **Какие размеры экрана поддерживаются?**

    Приложение адаптивно и адаптируется ко всем размерам экрана, от мобильных телефонов до настольных мониторов, обеспечивая оптимальный просмотр и удобство использования на всех устройствах.

### Технические вопросы

11. **Каковы минимальные системные требования для приложения?**

    Приложение должно работать на любом устройстве с современным браузером, который поддерживает Web API (Web Audio API, MediaRecorder API, Web Speech API). Большинство устройств, произведенных за последние 5 лет, соответствуют этим требованиям.

12. **Как приложение обрабатывает сбои во время записи?**

    Приложение реализует механизмы обработки ошибок для сохранения частично записанного аудио в случае непредвиденных прерываний. Механизм восстановления пытается восстановить сеанс записи, когда это возможно.

13. **Поддерживается ли одновременное использование нескольких микрофонов?**

    Нет, приложение в настоящее время поддерживает только один микрофон за раз. Одновременное использование нескольких микрофонов не поддерживается.

### Безопасность и конфиденциальность

14. **Какие данные передаются на внешние серверы?**

    Аудиозаписи остаются на вашем устройстве и не передаются на внешние серверы. Однако для транскрибации и перевода требуется отправка текстовых данных во внешние API, когда эти функции используются.

15. **Как часто обновляется приложение?**

    Обновления выпускаются периодически по мере добавления новых функций или исправления ошибок. Приложение уведомит вас, когда новая версия станет доступна.

16. **Какие меры предосторожности принимаются при работе с конфиденциальными записями?**

    Все записи хранятся локально на вашем устройстве с использованием безопасных механизмов хранения (localStorage и IndexedDB). Ни одна аудиоинформация не передается на внешние серверы, если вы специально не используете онлайн-сервисы транскрибации или перевода.

### Удобство использования

17. **Как пользователь может получить помощь или поддержку?**

    Помощь доступна через аккордеон "Помощь" в интерфейсе приложения и через документацию, предоставленную в этом файле README. Вы также можете открыть вопрос в репозитории GitHub для дополнительной поддержки.

18. **Поддерживаются ли уведомления о завершении процесса?**

    Уведомления о завершении процесса в настоящее время недоступны, но планируются для будущих версий. Также рассматриваются аудиоуведомления для различных событий.

19. **Как пользователь может оценить качество записи?**

    Приложение предоставляет несколько способов оценки качества записи:
    - Визуальный индикатор уровня звука во время записи
    - Немедленное воспроизведение записей
    - Статистика качества и производительности в панели журнала

    Эти модули можно отключить как плагины в настройках, если они не нужны.

20. **Можно ли настроить автоматическую очистку записей?**

    Да, вы можете настроить автоматическую очистку записей по дате в настройках хранения. Варианты включают сохранение записей навсегда, удаление после 7, 30 или 90 дней или выполнение полной очистки.

### Архитектура

21. **Как реализуются и управляются модули в приложении?**

    Все модули (запись, транскрибация, перевод, история, настройки и т.д.) реализованы как плагины и могут быть включены или отключены в панели настроек. Такая модульная архитектура позволяет настраивать функциональность в зависимости от потребностей пользователя.
